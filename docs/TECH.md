# Технический стек и архитектура

## Технологический стек

### Язык программирования
- **Python 3.13+**

### Основные библиотеки
- **tkinter** - GUI фреймворк (встроенный в Python)
- **pathlib** - Работа с путями файлов
- **json** - Сохранение/загрузка настроек
- **subprocess** - Управление службами Windows
- **ctypes** - Проверка прав администратора

### Инструменты разработки
- **uv** - Менеджер пакетов и окружений Python
- **PyInstaller** - Компиляция в исполняемый файл

## Архитектурные принципы

### Разделение ответственности
- **StunnelManager** - Бизнес-логика работы с конфигом и службой
- **StunnelGUI** - Представление (интерфейс)
- Вспомогательные функции для работы с правами администратора

### Хранение данных
- Настройки приложения: `%APPDATA%\GIIS_ServerSelector\settings.json`
- Логи: `%APPDATA%\GIIS_ServerSelector\stunnel_manager_*.log`
- Конфигурация stunnel: указывается пользователем (по умолчанию `C:\Windows\System32\stunnel.conf`)

### Безопасность
- Обязательная проверка прав администратора при запуске
- Автоматическая резервная копия конфига перед изменениями
- Восстановление из резервной копии при ошибке
- Детальное логирование всех операций

### Обработка ошибок
- Try-except блоки для всех критичных операций
- Информативные сообщения об ошибках
- Логирование ошибок для последующего анализа

## Правила стилизации кода

### Python Code Style
- **PEP 8** - Основной стандарт стиля кода
- Длина строки: до 100 символов
- Docstrings для всех классов и публичных методов
- Типизация в сигнатурах методов (type hints)

### Именование
- Классы: `PascalCase` (StunnelManager)
- Методы/функции: `snake_case` (get_current_server)
- Константы: `UPPER_CASE` (SERVICE_NAME)
- Приватные методы: `_leading_underscore` (_create_log_file)

### Структура кода
1. Импорты (стандартная библиотека → сторонние → локальные)
2. Константы модуля
3. Классы
4. Вспомогательные функции
5. Точка входа (if __name__ == "__main__")

## Зависимости

### Производственные
- Нет внешних зависимостей (только стандартная библиотека Python)

### Разработка и сборка
- `pyinstaller>=6.16.0` - Сборка в exe

## Целевая платформа
- **ОС**: Windows 10/11
- **Права**: Требуется администратор
- **Зависимости**: Установленная служба Stunnel
